var _my=require("../../../../../__antmove/api/index.js")(my);var wx=_my;var top=80;Component(wx.__bridge.reactCompHelper({ready:function ready(){var method=this.data.onRefresh;this.onRefreshMethod=method;this.onScrollFunc=this.data.onScroll;this.onScrollEndDragFunc=this.data.onScrollEndDrag;},methods:{formatEvent:function formatEvent(e){return{nativeEvent:{contentOffset:{x:e.detail.scrollLeft,y:e.detail.scrollTop}}};},recoverRefresh:function recoverRefresh(){var _this=this;if(this.stopTimerFlag){clearTimeout(this.stopTimerFlag);}this.stopTimerFlag=setTimeout(function(){var refreshing=_this.data._r.refreshing;if(_this.lastVal<=80&&!refreshing){_this.setData({sr:false});}},100);},outScroll:function outScroll(e){this.lastVal=e.detail.scrollTop;if(this.data._r.onRefreshPassed&&!this.underTouch){this.recoverRefresh();}if(this.onScrollEndDragFunc){this._scrollEvent=e;}if(this.onScrollFunc){this.onScrollFunc(this.formatEvent(e));}},startTouch:function startTouch(){this.underTouch=true;var method=this.data.onScrollBeginDrag;method&&method();},onScrollToupper:function onScrollToupper(){this.lastVal=0;},leaveTouch:function leaveTouch(){this.underTouch=false;if(this._scrollEvent&&this.onScrollEndDragFunc){this.onScrollEndDragFunc(this.formatEvent(this._scrollEvent));this._scrollEvent=undefined;}if(!this.data._r.onRefreshPassed)return;if(this.lastVal<20){this.onRefreshMethod&&this.onRefreshMethod();return;}var refreshing=this.data._r.refreshing;if(this.lastVal<=top&&this.lastVal>=20&&!refreshing){this.setData({sr:false});}},onEndReached:function onEndReached(){var _this2=this;if(this.data._r.onRefreshPassed&&!this.hasRefreshFirstCall){this.hasRefreshFirstCall=true;return;}var query=wx.createSelectorQuery().in(this);query.select("#container").boundingClientRect(function(res){var height=res.height;if(_this2.lastHeight===height)return;_this2.lastHeight=height;_this2.data.onEndReached&&_this2.data.onEndReached();}).exec();}},data:{withAni:false,outLeft:0,sr:false}}));